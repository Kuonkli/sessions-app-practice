# Sessions auth app

## Описание

Полноценное веб-приложение с системой аутентификации, включающее:

- Серверную часть: Node.js/Express
- Клиентскую часть: React.js
- Основные функции: регистрация, вход, сессии, кэширование данных, переключение тем

## Требования

- Node.js (версия 14 или новее)
- npm (версия 6 или новее)
- React.js (версия 17 или новее)

## Установка

### 1. Клонирование репозитория

```bash
git clone https://github.com/Kuonkli/sessions-app-practice.git
cd sessions-app-practice
```

### 2. Установка зависимостей

Для сервера:
```bash
cd server
npm install
```

Для клиента:
```bash
cd client
npm install
```

## Настройка

1. Создайте файл `.env` в папке `server`:

```
SESSION_SECRET=ваш_секретный_ключ
PORT=5000
```

2. Для разработки создайте файл `.env.development` в папке `client`:

```
REACT_APP_API_URL=http://localhost:5000
```

## Запуск приложения

### Запуск сервера

```bash
cd server
npm start
```

Сервер будет доступен по адресу: `http://localhost:5000`

### Запуск клиента

```bash
cd client
npm start
```

Клиентское приложение откроется по адресу: `http://localhost:3000`

## Использование

### Регистрация нового пользователя

1. Перейдите на главную страницу (`/`)
2. Выберите вкладку "Регистрация"
3. Заполните поля:
   - Имя пользователя
   - Пароль
4. Нажмите "Зарегистрироваться"

### Вход в систему

1. На главной странице выберите вкладку "Вход"
2. Введите свои учетные данные
3. Нажмите "Войти"

После успешного входа вы будете перенаправлены в личный кабинет (`/profile`)

### Личный кабинет

В личном кабинете доступны:
- Просмотр данных пользователя
- Кнопка "Обновить данные" для получения новых кэшированных данных
- Переключатель темы (светлая/темная)
- Кнопка "Выйти" для завершения сессии

## Особенности системы

### Серверная часть

- Хранение пользователей в JSON-файле
- Сессии с защищенными cookies
- Кэширование данных на 1 минуту
- Логирование всех запросов

### Клиентская часть

- Сохранение темы в localStorage
- Защищенные маршруты
- Автоматическая проверка авторизации
- Обработка ошибок

## Технические детали

### API Endpoints

- `POST /api/register` - регистрация
- `POST /api/login` - вход
- `GET /api/profile` - данные пользователя
- `POST /api/logout` - выход
- `GET /api/data` - кэшированные данные
- `GET /api/check-auth` - проверка авторизации

### Структура проекта

```
auth-system/
├── client/               # React приложение
│   ├── public/           # Статические файлы
│   ├── src/              # Исходный код
│   │   ├── components/   # UI компоненты
│   │   ├── hooks/        # Кастомные хуки
│   │   ├── pages/        # Страницы
│   │   ├── services/     # API сервисы
│   │   └── styles/       # Стили
│   └── package.json
├── server/               # Node.js сервер
│   ├── cache/            # Кэш данных
│   ├── data/             # Данные пользователей
│   ├── server.js         # Основной серверный файл
│   └── package.json
└── README.md
```

## Возможные проблемы и решения

### Проблемы с авторизацией

1. **При перезагрузке страницы выкидывает на главную**:
   - Это нормальное поведение - идет проверка авторизации
   - Если вы авторизованы, через секунду вернетесь назад

2. **Сессия не сохраняется**:
   - Убедитесь, что в браузере включены cookies
   - Проверьте CORS настройки на сервере

### Проблемы с запуском

1. **Порт занят**:
   - Измените PORT в .env файле
   - Или завершите процесс, занимающий порт

2. **Ошибки зависимостей**:
   - Удалите папку node_modules и package-lock.json
   - Выполните `npm install` заново
